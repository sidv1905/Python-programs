function pushInfo(t){invokeModal(t,"Info")}function pushSuccess(t){invokeModal(t,"Success")}function pushWarn(t){invokeModal(t,"Warning")}function pushError(t){invokeModal(t,"Error")}function pushAttention(t){invokeModal(t,"Attention")}function showDrupalMessages(t){if(t){var e="";$.each(t,function(t,r){$.each(r,function(r,o){e+='<span class="message-'+t+'">'+o+"</span><br/>"})});pushInfo(e)}}function pushSmall(t,e,r){invokeGenericModal({id:"small-box",message:'<div class="ccl-font-p ccl-align-c ccl-margin-m">'+t+"</div>",closeCross:true,areAllAllowed:true,callback:e})}function pushErrorSmall(t,e){pushSmall(t,e,"error")}function pushSuccessSmall(t,e){pushSmall(t,e,"success")}function showInternetError(){var t=$("#small-box");if(is_empty_value(t)){var e=function(){if(navigator.onLine){$("#small-box_wrapper").remove();$("#small-box_background").remove();pushSuccessSmall("You're connected now!");setTimeout(function(){$("#small-box_wrapper").remove();$("#small-box_background").remove()},2e3)}else{setTimeout(e,2e3)}};pushErrorSmall("<span>You're offline. Trying to reconnect </span><img style='padding: 2px; vertical-align: middle;' src='/misc/loader-icon.gif'/>",e)}}function getRandomInt(t,e){return Math.floor(Math.random()*(e-t+1))+t}function invokeModal(t,e){invokeGenericModal({id:e+"-modal",message:'<div class="ccl-font-h2 ccl-border-bottom ccl-padding-s ccl-margin-sm ccl-align-c">'+e+'</div><div class="ccl-font-p ccl-align-c ccl-margin-m">'+t+"</div>",closeCross:true,areAllAllowed:true})}var cCookie=function(t,e,r){if(typeof e!="undefined"){r=r||{};if(e===null){e="";r.expires=-1}var o="";if(r.expires&&(typeof r.expires=="number"||r.expires.toUTCString)){var s;if(typeof r.expires=="number"){s=new Date;s.setTime(s.getTime()+r.expires*24*60*60*1e3)}else{s=r.expires}o="; expires="+s.toUTCString()}var a=r.path?"; path="+r.path:"";var i=r.domain?"; domain="+r.domain:"";var n=r.secure?"; secure":"";document.cookie=[t,"=",encodeURIComponent(e),o,a,i,n].join("")}else{var l=null;if(document.cookie&&document.cookie!=""){var c=document.cookie.split(";");for(var u=0;u<c.length;u++){var p=jQuery.trim(c[u]);if(p.substring(0,t.length+1)==t+"="){l=decodeURIComponent(p.substring(t.length+1));break}}}return l}};var cAjax=function(t){function e(t){try{var e=JSON.parse(t);if(e&&typeof e==="object"&&e!==null){return e}}catch(t){}return t}t["type"]=t["type"]?t["type"]:"GET";if(t["url"].indexOf("?")===-1&&t["type"]==="GET"){t["url"]=t["url"]+"?v="+Date.now()}return $.ajax({dataType:t["dataType"]?t["dataType"]:"JSON",url:t["url"],type:t["type"]?t["type"]:"GET",data:t["data"],retryCount:t["retryCount"]?t["retryCount"]:0,retryLimit:10,success:function(r){r=e(r);if(r.status==="rate_limit_exceeded"){window.location.reload()}else if(r.hasOwnProperty("status")&&r.hasOwnProperty("message")&&r.hasOwnProperty("redirect")){if(r["status"]=="error"&&r["message"]=="Session limit exceeded"&&location.pathname.indexOf(r["redirect"])!==0){(function(t){window.location.href=r["redirect"]+"?destination="+t.location.pathname.substr(1)})(window);return}}if(typeof t["success"]=="function"){t["success"](r)}},error:function(r){r=e(r);if(r.hasOwnProperty("status")&&r.hasOwnProperty("message")&&r.hasOwnProperty("redirect")){if(r["status"]=="error"&&r["message"]=="Session limit exceeded"&&location.pathname.indexOf(r["redirect"])!==0){(function(t){window.location.href=r["redirect"]+"?destination="+t.location.pathname.substr(1)})(window);return}}if(r.status>500&&this.retryCount<this.retryLimit){t["retryCount"]=t["retryCount"]?t["retryCount"]+1:1;setTimeout(function(){cAjax(t)},2e3)}else{if(typeof t["error"]=="function"){var o=e(r.responseText);t["error"](o)}}}})};var cacheClass=function(){var t=[];function e(t,e,r,o){return new cache(t,e,r,o)}return{getGlobalCache:function(t,e){return this.getInstance("1",t,e,true)},getInstance:function(r,o,s,a){var i=o;if(a&&a===true){i+="global"}else{i+=r}if(!t[i]){t[i]=e(r,o,s,a)}return t[i]}}}();function is_empty_value(t){if(typeof Ember==="undefined"){return typeof t==="undefined"||t===""}else{return Ember&&Ember.isEmpty(t)}}var cache=function(t,e,r,o){var s=window.localStorage;var a=CryptoJS.MD5(window.location.href.split("?")[0]+r);var i=t;if(o&&o===true){i="global"}var n=a+":"+i+":"+e+":";if(s){return{global:o,storage:s,cid:t,userkey:r,set:function(t,e,r){var o=(new Date).getTime()/1e3;r=r==undefined?0:r;if(!is_empty_value(e)){e={ttl:r,value:e,timestamp:o};e=JSON.stringify(e);e=CryptoJS.AES.encrypt(e,this.userkey);try{this.storage.setItem(n+t,e)}catch(t){if(t.code==22){}}}},update:function(t,e,r){var o=this.storage.getItem(n+t);if(o&&o.length>0){var s=CryptoJS.AES.decrypt(o,this.userkey).toString(CryptoJS.enc.Utf8);s=JSON.parse(s);var a=s.timestamp;if(!is_empty_value(e)){e={ttl:r,value:e,timestamp:a};e=JSON.stringify(e);e=CryptoJS.AES.encrypt(e,this.userkey);this.remove(t);this.storage.setItem(n+t,e)}}else{this.set(t,e,r)}},get:function(t){var e=(new Date).getTime()/1e3;var r=this.storage.getItem(n+t);if(r&&r.length>0){var o=CryptoJS.AES.decrypt(r,this.userkey).toString(CryptoJS.enc.Utf8);o=JSON.parse(o);if(o.ttl==0||e-o.timestamp<=o.ttl){return o.value}else{this.remove(t)}}return""},has:function(t){return this.get(t)?true:false},remove:function(t){var e=this.storage.getItem(n+t);if(e&&e.length>0){s.removeItem(n+t)}}}}else{return{global:o,storage:{},cid:t,userkey:r,uniqueCacheWrapperId:n,set:function(t,e,r){var o=(new Date).getTime()/1e3;r=r=="undefined"?0:r;if(!is_empty_value(e)){e={ttl:r,value:e,timestamp:o};e=JSON.stringify(e);e=CryptoJS.AES.encrypt(e,this.userkey).toString(CryptoJS.enc.Utf8);this.storage[this.uniqueCacheWrapperId+t]=e}},update:function(t,e,r){var o=this.storage[n+t];if(this.storage.hasOwnProperty(this.uniqueCacheWrapperId+t)){var s=CryptoJS.AES.decrypt(o,this.userkey).toString(CryptoJS.enc.Utf8);s=JSON.parse(s);var a=s.timestamp;if(!is_empty_value(e)){e={ttl:r,value:e,timestamp:a};e=JSON.stringify(e);e=CryptoJS.AES.encrypt(e,this.userkey);this.remove(t);this.storage[n+t]=e}}else{this.set(t,e,r)}},get:function(t){var e=(new Date).getTime()/1e3;if(this.storage.hasOwnProperty(this.uniqueCacheWrapperId+t)){var r=this.storage[this.uniqueCacheWrapperId+t];var o=CryptoJS.AES.decrypt(r,this.userkey).toString(CryptoJS.enc.Utf8);if(o.ttl==0||e-o.timestamp<=o.ttl){return this.storage[this.uniqueCacheWrapperId+t]}else{this.remove(t)}}return""},has:function(t){return this.get(t)?true:false},remove:function(t){if(this.storage.hasOwnProperty(this.uniqueCacheWrapperId+t)){delete this.storage[this.uniqueCacheWrapperId+t]}}}}};var clearUserCache=function(){cAjax({url:"/api/user/key",success:function(t){var e=t.key;var r=cacheClass.getGlobalCache("user",e);r.remove("user")}})};var showBrowserNotSupported=function(){$(document).ready(function(){var t='<!DOCTYPE html><html><head>\t<meta charset="utf-8">\t<meta http-equiv="X-UA-Compatible" content="IE=edge">\t<title>Your browser is not supported</title>\t<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400" rel="stylesheet">\t<style>\t\t*{\t\t\tmargin: 0;\t\t\tpadding: 0;\t\t\tbox-sizing: border-box;\t\t}\t\tbody{\t\t\tbackground: #F8F8F8;\t\t\theight: 100vh;\t\t\tfont: 400 18px/1.6 "Open Sans", sans-serif;\t\t\tcolor: #4a4a4a;\t\t\tdisplay: flex;\t\t\tjustify-content: center;\t\t\talign-items: center;\t\t}\t\t.browserSupport__container {\t\t\tbackground: #fff;\t\t\twidth: 840px;\t\t\tbox-shadow: 2px 2px 8px 1px rgba(0,0,0,.1);\t\t\ttext-align: center;\t\t\tpadding: 100px 30px 0;\t\t\tposition: relative;\t\t\tborder-radius: 10px;            display: block;\t\t}\t\th1{\t\t\tposition: absolute;\t\t    top: -65px;\t\t    left: 50%;\t\t    transform: translateX(-50%);\t\t}\t\th2{\t\t\tfont-weight: 300;\t\t\tfont-size: 34px;\t\t\tmargin-bottom: 20px;\t\t}\t\tul{\t\t\tdisplay: flex;\t\t\tjustify-content: center;\t\t\tmargin: 30px 0 50px;\t\t}\t\tul li{\t\t\tlist-style: none;\t\t\tmargin-right: 50px;\t\t}\t\tul li:last-child{\t\t\tmargin-right: 0;\t\t}\t\tul li strong{\t\t\tdisplay: block;\t\t\tfont-size: 15px;\t\t}\t\tul li a:hover{\t\t\ttext-decoration: none;\t\t}        .campaign-visibility{            display: none;        }\t</style></head><body>\t<div class="browserSupport__container">\t\t<h1><img src="https://www.codechef.com/sites/all/themes/abessive/logo.png" alt="CodeChef" width="280"></h1>\t\t<h2>Uh Oh! We do not support this browser</h2>\t\t<p>CodeChef would not run on the browser you are using as it might disrupt some of its functionality. Please upgrade to one of the following modern browsers for a better experience.</p>\t\t<ul>\t\t\t<li>\t\t\t\t<a href="https://www.google.com/chrome/"><img src="https://github.com/alrra/browser-logos/blob/master/src/chrome/chrome_256x256.png?raw=true" alt="Google Chrome" width="80"><strong>Google Chrome</strong></a>\t\t\t</li>\t\t\t<li>\t\t\t\t<a href="https://www.mozilla.org/en-US/firefox/new/"><img src="https://github.com/alrra/browser-logos/blob/master/src/firefox/firefox_256x256.png?raw=true" alt="Mozilla Firefox" width="80"><strong>Mozilla Firefox</strong></a>\t\t\t</li>\t\t\t<li>\t\t\t\t<a href="https://www.opera.com/"><img src="https://github.com/alrra/browser-logos/blob/master/src/opera/opera_256x256.png?raw=true" alt="Opera" width="80"><strong>Opera</strong></a>\t\t\t</li>\t\t\t<li>\t\t\t\t<a href="http://www.apple.com/safari"><img src="https://github.com/alrra/browser-logos/blob/master/src/safari/safari_256x256.png?raw=true" alt="Safari" width="80"><strong>Mozilla Safari</strong></a>\t\t\t</li>\t\t</ul>\t</div></body></html>';document.open();document.write(t);document.close()})};var getUserKey=function(t){if(typeof Promise=="undefined"){showBrowserNotSupported()}else{return new Promise(function(e,r){var o=cCookie("userkey");t=!is_empty_value(t)?t:"";var s=function(){cAjax({url:t+"/api/user/key",success:function(t){cCookie("userkey",t.key,{expires:6e-4,path:"/"});e(t.key)},error:function(t){r(t)}})};if(o){e(o)}else{s()}})}};var campaigns=function(t){t=!is_empty_value(t)?t:"";cAjax({url:t+"/api/user/campaigns",success:function(t){if(t.data){var e=t.data;$.each(e,function(t,e){$("body").append('<div class="campaign-visibility">'+e+"</div>")})}}})};var showDrupalMessageModalGeneric=function(t,e){$(document).ready(function(){var r="modalbox-error-action"+Date.now();invokeGenericModal({message:t,closeCross:true,id:r,areAllAllowed:true,callback:e,args:r})})};var initialise_datatable=function(t,e,r,o,s,a,i,n){App=Ember.Application.create({rootElement:"#ember_root"});App.ApplicationRoute=Ember.Route.extend({setupController:function(e,r){var o={type:"GET",url:t,success:function(r){n.set(t,r,120);e.set("model",Ember.A(r))}};if(n.has(t)){e.set("model",Ember.A(n.get(t)))}else{cAjax(o,false,true)}}});App.ApplicationController=Ember.ArrayController.extend(Ember.DataTableMixin,{staticProperties:e,headerAlias:Ember.Object.create(s),filters:i,queryParams:o,queryParamsEnabled:true,rowTemplate:r,itemsPerPage:a});App.Router.map(function(){this.resource("application",{path:"/"})})};var load_datatable=function(t,e,r,o,s,a,i,n){getUserKey().then(function(l){var c=cacheClass.getGlobalCache(t,l);initialise_datatable(e,r,o,s,a,i,n,c)},function(t){t=JSON.parse(t.responseText);if(!Ember.isEmpty(t.message)){pushError(t.message)}else{pushError("Some error occurred")}})};function addShowMoreLessFunctionality(){$(".more-less-content").hide();$(".more-less-button").remove();$(".more-less-content").after('<a class="more-less-toggle more">See more</a>');$(".more-less-toggle").unbind("click");$(".more-less-toggle").click(function(){$(this).text($(this).text()=="See more"?"See less":"See more");$(this).removeClass("more").removeClass("less").addClass($(this).text()=="See more"?"more":"less");$(this).prev(".more-less-content").slideToggle("fast")})}function getSearchParameters(){var t=window.location.search.substr(1);return t!=null&&t!=""?transformToAssocArray(t):{}}function transformToAssocArray(t){var e={};var r=t.split("&");for(var o=0;o<r.length;o++){var s=r[o].split("=");e[s[0]]=s[1]}return e}$(document).ready(function(){campaigns();$('input[type="file"]').change(function(){var t=$(this).attr("data-supported-extensions").split(",");if(t.length){if($.inArray($(this).val().split(".").pop().toLowerCase(),t)==-1){$(this).val("");showDrupalMessageModal('<div class="messages error">File format not supported. Allowed formats are : '+t.join(", ")+"</div>")}else{var e=parseInt($(this).attr("data-file-size"));if(e){if(this.files[0].size>e){$(this).val("");showDrupalMessageModal('<div class="messages error">File size should be less than '+e/1024+" KB.</div>")}}}}})});